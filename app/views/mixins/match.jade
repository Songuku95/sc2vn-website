mixin matches-list(matches)
  table.table.table-condensed.table-hover
    tbody
      if matches
        each match in matches
          tr
            td.col-md-2(align='left')= match.date.toLocaleString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })
            td.col-md-3(align='right')
              a(href=match.player_1.getShowPath())
                = match.player_1.name
                | &nbsp;
                img.avatar-small(src=match.player_1.avatar)
            td.col-md-1(align='center') vs
            td.col-md-3(align='left')
              a(href=match.player_2.getShowPath())
                img.avatar-small(src=match.player_2.avatar)
                | &nbsp;
                = match.player_2.name
            td.col-md-2(align='right')
              a(href=match.getShowPath())
                i.fa.fa-eye.fa-fw
              | &nbsp;
              a(href='#')
                i.fa.fa-youtube-play.fa-fw

mixin match-form()
  h4(style='margin-bottom: 30px;')
    strong New Match
  .form
    .form-group
      label Player 1
      .input-group
        span.input-group-addon
          i.fa.fa-user.fa-fw
        input.form-control(type='text', name='player1')
    .form-group
      label Player 2
      .input-group
        span.input-group-addon
          i.fa.fa-user.fa-fw
        input.form-control(type='text', name='player2')
    .form-group
      label Number of matches
      .input-group
        span.input-group-addon
          i.fa.fa-map.fa-fw
        input.form-control(type='number', name='matchesCount')
    .form-group
      label Start date
      .input-group
        span.input-group-addon
          i.fa.fa-calendar.fa-fw
        input.form-control(type='date', name='start')

    button.btn.button-submit(type='submit') Submit


mixin match(match, type)
  .box
    h3.text-center= match.tournament ? match.tournament.name : 'Public match'
    hr
    table.table.table-borderless
      tbody
        tr
          td.col-md-2(align='left')
            h5
              strong= match.player_1.name
            = '#' + match.player_1.rank
          td.col-md-3(align='right')
            img.avatar(src=match.player_1.avatar, class='race-' + match.player_1.race)
          td.col-md-2(align='center')
            button.btn.btn-default
              = match.winner() ? match.winner().name + ' wins' : 'Draw'
            h5
              = 'Best of ' + match.games.length
            h6
              = match.date.getDate() + '/' + match.date.getMonth() + '/' + match.date.getUTCFullYear()
          td.col-md-3(align='left')
            img.avatar(src=match.player_2.avatar, class='race-' + match.player_2.race)
          td.col-md-3(align='right')
            h5
              strong= match.player_2.name
            = '#' + match.player_2.rank

    .tabs-left
      ul.nav.nav-tabs
        each game, index in match.games
          li(class= index == 0 ? 'active' : '')
            a(href='#game' + index, data-toggle='tab', aria-expanded='true')
              = 'Game ' + (index + 1)
      .tab-content
        each game, index in match.games
          .tab-pane(id='game' + index, class=index == 0 ? 'active' : '')
            if type == 'edit'
              +game-form(index)
            else
              +game(game)

mixin game(game)
  img.img.pull-right(width='200px', height='200px')
  p= "Player 1 race: " + game.race1
  p= "Player 2 race: " + game.race2
  p= "Status: " + game.status

mixin game-form(index)
  .form-group
    label Player 1 race
    .input-group
      span.input-group-addon
        i.fa.fa-flag.fa-fw
      input.form-control(id='#g#{index}p1race', type='text')
  .form-group
    label Player 2 race
    .input-group
      span.input-group-addon
        i.fa.fa-flag.fa-fw
      input.form-control(id='#g#{index}p2race', type='text')
  .form-group
    label Map
    .input-group
      span.input-group-addon
        i.fa.fa-map.fa-fw
      input.form-control(id='#g#{index}map', type='text')
  .form-group
    label Winner
    .input-group
      span.input-group-addon
        i.fa.fa-trophy.fa-fw
      input.form-control(id='#g#{index}status', type='text')
